# 분석 리포트 페이지 MVP (Web/PWA/TWA 공통)

## 목표
- 사용자에게 개인 이용 리포트 페이지 제공
- 운영자에게 서비스 전체 통계 페이지 제공
- 동일 이벤트 스키마를 기반으로 플랫폼별 지표 비교 가능하게 구성

## 라우트
- 사용자: `/me/report`
- 관리자: `/admin/analytics` (관리자 전용 접근 제어 필수)

## 1차 MVP 범위
### 사용자 리포트 (`/me/report`)
- 내 총 기록 수
- 이번 달 기록 수
- 완료율(DONE 비율)
- 평점 입력률
- 메모 입력률
- 선호 타입(movie/series/book)
- 선호 장소/함께한 방식(place/occasion)
- 연속 기록일(streak)

데이터 소스:
- 우선 `IndexedDB(localStore)` 기준으로 즉시 제공
- 이후 서버 이벤트/DB 집계값으로 교체

### 관리자 통계 (`/admin/analytics`)
- 현재는 안전한 접근 제어 + 빈 상태 페이지로 시작
- 지표 백엔드 연결 전까지 준비 상태/연결 체크리스트 제공
- 추후 연결 지표:
  - DAU/WAU/MAU
  - D1/D7/D30
  - 방문 -> 로그인 -> 첫 기록 퍼널
  - 플랫폼별(web/pwa/twa) 비교

## 보안 모델
- 관리자 페이지는 "전용 URL"만으로 보호하지 않는다.
- 최소 요구:
  - 서버 측 검증 가능한 관리자 토큰 또는 세션/RBAC
  - 로그 기록(누가 언제 접속했는지)
- 권장:
  - 사내 SSO 또는 OAuth 기반 관리자 인증
  - 관리자 API와 일반 사용자 API 분리

## 구현 단계
1. 프론트 라우트 생성
- [x] `/me/report` 뼈대
- [x] `/admin/analytics` 뼈대

2. 데이터 계층
- [x] 개인 리포트 로컬 집계 유틸
- [ ] 이벤트 수집 테이블/엔드포인트
- [ ] 관리자용 집계 쿼리/뷰

3. 운영 적용
- [ ] 관리자 인증 고도화(RBAC/SSO)
- [ ] 대시보드 알림/주간 리포트

## 환경 변수 제안
- `ADMIN_ANALYTICS_TOKEN`: 관리자 페이지 임시 접근 토큰

주의:
- 토큰 기반 접근은 MVP 단계의 임시 방안이다.
- 프로덕션 운영 단계에서는 세션 기반 권한 체계로 전환 필요.
